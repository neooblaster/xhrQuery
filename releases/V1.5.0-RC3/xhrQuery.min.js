/**
 * @version : v1.5.0-RC3
 * @release : 17.04.2021
 * @source  : https://github.com/neooblaster/xhrQuery
 */
function xhrQuery(){return this.xhr_engine=null,this.xhr_errors=[],this.xhr_executed=0,this.xhr_callbacks=[],this.xhr_errorbacks=[],this.xhr_form_data=new FormData,this.xhr_method="post",this.xhr_progress=null,this.xhr_raw_data=[],this.xhr_response=[],this.xhr_target=null,this.xhr_send_file=!1,this.xhr_warn_textarea=!1,this.xhr_headers={},this.xhr_with_cred=!1,this.xhr_username="",this.xhr_password="",this.xhr_async=!0,this.async=function(){return this.xhr_async=!0,this},this.callbacks=function(){for(var r=0;r<arguments.length;r++)"function"==typeof arguments[r]?this.xhr_callbacks.push(arguments[r]):this.xhr_errors.push({error_level:2,error_message:"xhrQuery::callback() :: The input callback '"+arguments[r]+"' is not a function."});return this},this.errors=function(){for(var r=0;r<arguments.length;r++)"function"==typeof arguments[r]?this.xhr_errorbacks.push(arguments[r]):this.xhr_errors.push({error_level:2,error_message:"xhrQuery::callback() :: The input callback '"+arguments[r]+"' is not a function."});return this},this.username=function(r){this.xhr_username=r},this.password=function(r){this.xhr_password=r},this.forms=function(r){for(var e in void 0===r&&this.xhr_errors.push({error_level:2,error_message:"xhrQuery::forms() :: At least one HTMLFormElement is required."}),arguments)if(arguments[e]instanceof HTMLFormElement)for(var s=0;s<arguments[e].elements.length;s++){var t=arguments[e].elements[s];this.inputs(t)}else this.xhr_errors.push({error_level:2,error_message:"xhrQuery::forms() :: Argument nÂ°"+e+" supplied is invalid : ["+typeof arguments[e]+"] "+arguments[e]+"."});return this},this.get=function(r){return void 0===r&&(r=this.xhr_executed),r=parseInt(r),isNaN(r)&&(r=this.xhr_executed),this.xhr_response[r]},this.inputs=function(){for(var r=0;r<arguments.length;r++){var e=null;if(null===(e="string"==typeof arguments[r]?document.getElementById(arguments[r]):arguments[r]))this.xhr_errors.push({error_level:2,error_message:"xhrQuery::inputs() :: The input number "+r+" doesn't not exist -> input ignored."});else{var s=e.getAttribute("name");if(null!==s)switch(e.tagName.toUpperCase()){case"INPUT":var t=e.getAttribute("type");if(null!==t)switch(t){case"file":for(var h=0;h<e.files.length;h++)this.xhr_form_data.append("file[]",e.files[h]);this.xhr_send_file=!0;break;case"text":case"password":case"hidden":this.xhr_form_data.append(s,e.value),this.xhr_raw_data.push(s+"="+e.value);break;case"radio":case"checkbox":e.checked&&(this.xhr_form_data.append(s,e.value),this.xhr_raw_data.push(s+"="+e.value));break;default:this.xhr_errors.push({error_level:2,error_message:"xhrQuery::inputs() :: The input number "+r+" with type = "+t+" not managed with xhrQuery() -> input ignored."})}else this.xhr_errors.push({error_level:2,error_message:"xhrQuery::inputs() :: The input number "+r+" has no attribut type -> input ignored"});break;case"SELECT":e.options.length>0?(this.xhr_form_data.append(s,e.value),this.xhr_raw_data.push(s+"="+e.value)):this.xhr_errors.push({error_level:2,error_message:"xhrQuery::inputs() :: The select input "+e+" has no options -> input ignored"});break;case"TEXTAREA":this.xhr_form_data.append(s,e.value),this.xhr_warn_textarea=!0}else this.xhr_errors.push({error_level:2,error_message:"xhrQuery::inputs() :: The input number "+r+" don't have attribut name -> input ignored"})}}return this},this.headers=function(r,e){if("string"==typeof r)null===e&&this.xhr_errors.push({error_level:2,error_message:"xhrQuery::headers() :: argument 'sValue' should not be null."}),this.xhr_headers[r]=e;else if("object"==typeof r)for(var s in r)null===r[s]&&this.xhr_errors.push({error_level:2,error_message:`xhrQuery::headers() :: provided header '${s}' shoud not be null`}),this.xhr_headers[s]=r[s];else console.error("xhrQuery::headers() :: Can not determine type of provided argument 'mHeader'")},this.CORSUseCredentials=function(r=!0){return this.xhr_with_cred=r,this},this.method=function(r){return r=r.toLowerCase(),["get","post"].lastIndexOf(r)>-1?this.xhr_method=r:this.xhr_errors.push({error_level:2,error_message:"xhrQuery::methode() :: The method '"+r+"' is not allowed : use 'get' or 'post'"}),this},this.progress=function(r){return"function"==typeof r?this.xhr_progress=r:this.xhr_errors.push({error_level:2,error_message:"xhrQuery::progress() :: The input progress '"+r+"' is not a function."}),this},this.send=function(){if(null!==this.xhr_target){if(this.xhr_engine=new this.xhr,(this.xhr_username||this.xhr_password)&&!this.xhr_headers.Authorization){var r=`${this.xhr_username}:${this.xhr_password}`;this.xhr_headers.Authorization=`Basic ${btoa(r)}`}switch(null!==this.xhr_callback?this.xhr_engine.onreadystatechange=function(){if(4!==this.xhr_engine.readyState||200!==this.xhr_engine.status&&0!==this.xhr_engine.status){if(4===this.xhr_engine.readyState)for(r=0;r<this.xhr_errorbacks.length;r++)this.xhr_errorbacks[r](this.xhr_engine.response)}else for(var r=0;r<this.xhr_callbacks.length;r++)this.xhr_callbacks[r](this.xhr_engine.responseText)}.bind(this):this.xhr_errors.push({error_level:0,error_message:"xhrQuery() running without callback function."}),null!==this.xhr_progress&&(this.xhr_engine.upload.onprogress=function(r){var e=r.loaded,s=r.total;this.xhr_progress(e,s)}.bind(this)),this.xhr_method){case"get":for(var e=null,s=this.xhr_target,t=0;t<this.xhr_raw_data.length;t++)e=null!==e?e+"&"+this.xhr_raw_data[t]:this.xhr_raw_data[t];for(var h in e&&(s=this.xhr_target+"?"+e),this.xhr_send_file&&this.xhr_errors.push({error_level:2,error_message:"xhrQuery::send() :: Datas sent with 'GET' method. The files datas has not been sent."}),this.xhr_warn_textarea&&this.xhr_errors.push({error_level:2,error_message:"xhrQuery::send() :: Datas sent with 'GET' method. The textarea inputs has not been sent."}),this.xhr_executed++,this.xhr_engine.open("GET",s,this.xhr_async),this.xhr_headers)this.xhr_headers.hasOwnProperty(h)&&this.xhr_engine.setRequestHeader(h,this.xhr_headers[h]);this.xhr_engine.withCredentials=this.xhr_with_cred,this.xhr_engine.send(null);break;case"post":for(var h in this.xhr_executed++,this.xhr_engine.open("POST",this.xhr_target,this.xhr_async),this.xhr_headers)this.xhr_headers.hasOwnProperty(h)&&this.xhr_engine.setRequestHeader(h,this.xhr_headers[h]);this.xhr_engine.withCredentials=this.xhr_with_cred,this.xhr_engine.send(this.xhr_form_data)}}else this.xhr_errors.push({error_level:1,error_message:"send() :: The server script target is not defined. You must use .target($target)"});if(this.xhr_errors.length>0){console.log("xhrQuery() :: Below, the list of all encountered errors :");for(t=0;t<this.xhr_errors.length;t++){switch(this.xhr_errors[t].error_level){case 0:console.log("\t"+this.xhr_errors[t].error_message);break;case 1:console.error("\t"+this.xhr_errors[t].error_message),!1;break;case 2:console.warn("\t"+this.xhr_errors[t].error_message)}}}return this},this.sync=function(){return this.xhr_async=!1,this},this.target=function(r){return this.xhr_target=r,this},this.values=function(){for(var r=0;r<arguments.length;r++){var e=arguments[r].split("="),s=e[0],t=e[1];this.xhr_form_data.append(s,t),this.xhr_raw_data.push(arguments[r])}return this},this.xhr=function(){var r=null;if(window.ActiveXObject)try{r=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){r=new ActiveXObject("Microsoft.XMLHTTP")}else r=new XMLHttpRequest;return r},this.callbacks(function(r){this.xhr_response.push(r)}.bind(this)),this}